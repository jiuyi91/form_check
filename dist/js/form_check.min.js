!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){var n,s,a;!function(r,i){let l=i(r);e&&"string"!=typeof e.nodeName?t.exports=l:(s=[e],void 0===(a="function"==typeof(n=l)?n.apply(e,s):n)||(t.exports=a)),r.form_check=l}(this,(function(t,e){"use strict";let r=window,n=document,s=t=>{if("string"==typeof t&&(t=n.querySelector(t)),t&&t.tagName)return t;console.error("form_check:请检查你传入的元素是否正确。")},a={},i={},l=(t,e)=>{i[t]?console.error(t+"校验的名字已用过，请重新取一个名，已有的可在“yi_public.form_check._check_list”中查到"):i[t]=e},o={notice:t=>{t.tips.classList.remove("error_tips"),t.tips.classList.remove("warn_tips"),t.rev?t.tips.innerHTML="":(t.tips.innerHTML=t.msg||"","blur"===t.type&&t.tips.classList.add("error_tips"),"focus"===t.type&&t.tips.classList.add("warn_tips"))},content:t=>{if(t.target=s(t.target),t.tips=t.tips&&s(t.tips),t.tips||(t.tips=n.createElement("span"),((t,e)=>{let r=e.parentNode;r.lastChild==e?r.appendChild(t):r.insertBefore(t,e.nextSibling)})(t.tips,t.target)),t.tips.classList.add("input_tips"),t.target.__form_check__content)return void console.error("此元素不能绑两次校验",t.target);t.target.__form_check__content=!0;let e=null,r=()=>{t.result&&clearInterval(e);let r=t.target.value||"",n=i[t.check]({val:r,check:i});return o.notice({target:t.target,tips:t.tips,msg:n.MSG,rev:n.REV,type:"blur"}),n.REV},l=t.form_name||"0";return a[l]=a[l]||[],a[l].push({_fn:r,_obj:t}),t.target.addEventListener("blur",r,!1),t.target.addEventListener("focus",()=>{t.result&&(clearInterval(e),e=setInterval(()=>{let e=t.target.value||"",r=i[t.check]({val:e,check:i});r.target=t.target,r.tips=t.tips,t.result(r)},600)),o.notice({target:t.target,tips:t.tips,msg:t.entry,rev:!t.entry,type:"focus"})},!1),{target:t.target,tips:t.tips}},check:t=>{t.tips=t.tips&&s(t.tips);let e=i[t.check]({val:t.val,check:i});return t.tips&&o.notice({tips:t.tips,msg:e.MSG,rev:e.REV,type:"blur"}),e.REV},must:t=>{let e,r=!0,n=!0,s=a[t||"0"]||[];for(let t=0;t<s.length;t++){let a=s[t]._fn();s[t]._obj.required&&(e=!0,a||(n=a)),a||(r=a)}return e?n:r},set_check:l,_check_list:i};return l("is_empty",t=>{let e=t.val,r="",n=!0;return""!=e&&null!=e||(n=!1,r="不能为空"),{REV:n,MSG:r}}),l("is_email",t=>{let e=t.val,r=t.check.is_empty(t),n=r.REV,s=r.MSG;return n&&!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)&&(n=!1,s="请输入正确的邮箱"),{REV:n,MSG:s}}),l("phone",t=>{let e=t.val.replace(/(^\s*)|(\s*$)/g,""),r=t.check.is_empty(t),n=r.REV,s=r.MSG;return n&&!/^(1)[3|4|5|6|7|8|9]\d{9}$/.test(e)&&(n=!1,s="请输入正确的手机号"),{REV:n,MSG:s}}),l("real_name",t=>{let e=t.val,r=t.check.is_empty(t),n=r.REV,s=r.MSG;return n&&!/^\s*[\u4e00-\u9fa5]{1,}[\u4e00-\u9fa5.?]{0,15}[\u4e00-\u9fa5]{1,}\s*$/.test(e)||e.length>20?(n=!1,s="请输入正确真实姓名"):e.indexOf(" ")>-1&&(n=!1,s="不能有空格"),{REV:n,MSG:s}}),l("address",t=>{let e,r=t.val,n=t.check.is_empty(t),s=n.REV,a=n.MSG;return s&&/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\ ]/g.test(r)&&(e=r.match(/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\ ]/g)||[],s=!1,a="不得含有("+e.join(" ")+")"),{REV:s,MSG:a}}),l("id_card",t=>{let e=t.val,r=e.length,n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],s=[1,0,10,9,8,7,6,5,4,3,2],a=0,i=t.check.is_empty(t),l=i.REV,o=i.MSG;var c,u,p,f;return l&&(l&&15==r?(c=e.substring(6,8),u=e.substring(8,10),p=e.substring(10,12),((f=new Date(c,parseFloat(u)-1,parseFloat(p))).getYear()!=parseFloat(c)||f.getMonth()!=parseFloat(u)-1||f.getDate()!=parseFloat(p))&&(l=!1,o="请输入正确身份证号码")):l&&18==r&&function(){var e=0,r=t.val.split("");"x"==r[17].toLowerCase()&&(r[17]=10);for(var i=0;i<17;i++)e+=n[i]*r[i];return a=e%11,r[17]==s[a]}()&&function(){var t=e.substring(6,10),r=e.substring(10,12),n=e.substring(12,14),s=new Date(t,parseFloat(r)-1,parseFloat(n));return s.getFullYear()==parseFloat(t)&&s.getMonth()==parseFloat(r)-1&&s.getDate()==parseFloat(n)}()||(l=!1,o="请输入正确身份证号码")),{REV:l,MSG:o}}),r.yi_public=r.yi_public||{},r.yi_public.form_check=o,o}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm1fY2hlY2suanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnbG9iYWwiLCJmYWN0b3J5IiwiZm9ybV9jaGVjayIsIm5vZGVOYW1lIiwidGhpcyIsInVuZGVmaW5lZCIsIl93aW4iLCJ3aW5kb3ciLCJfZG9jIiwiZG9jdW1lbnQiLCJnZXRfZG9tIiwiZG9tIiwicXVlcnlTZWxlY3RvciIsInRhZ05hbWUiLCJjb25zb2xlIiwiZXJyb3IiLCJmb3JtX2xpc3QiLCJfY2hlY2tfbGlzdCIsIl9zZXRfY2hlY2siLCJjaGVja19mbiIsIm5vdGljZSIsIm9iaiIsInRpcHMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZXYiLCJpbm5lckhUTUwiLCJtc2ciLCJ0eXBlIiwiYWRkIiwiY29udGVudCIsInRhcmdldCIsImNyZWF0ZUVsZW1lbnQiLCJuZXdfZWwiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwibGFzdENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsImluc2VydF9hZnRlciIsIl9fZm9ybV9jaGVja19fY29udGVudCIsImJsdXJfdGltZXIiLCJibHVyX2ZuIiwicmVzdWx0IiwiY2xlYXJJbnRlcnZhbCIsInZhbCIsImNoZWNrIiwiTVNHIiwiUkVWIiwiX2Zvcm1fbmFtZSIsImZvcm1fbmFtZSIsInB1c2giLCJfZm4iLCJfb2JqIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEludGVydmFsIiwiZW50cnkiLCJtdXN0Iiwic3RyIiwicmVxdWlyZWQiLCJyZXF1aXJlZF9yZXYiLCJ0YXJnZXRfbGlzdCIsImxlbmd0aCIsImYiLCJzZXRfY2hlY2siLCJudW0iLCJub3RfZW1wdHkiLCJpc19lbXB0eSIsInRlc3QiLCJyZXBsYWNlIiwiaW5kZXhPZiIsIl9tc2dfYXJyIiwibWF0Y2giLCJqb2luIiwibGVuIiwid2kiLCJ2YWxpZGVfY29kZSIsInZhbF9jb2RlIiwieWVhciIsIm1vbnRoIiwiZGF5IiwidGVtcF9kYXRlIiwic3Vic3RyaW5nIiwiRGF0ZSIsInBhcnNlRmxvYXQiLCJnZXRZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwic3VtIiwic3BsaXQiLCJ0b0xvd2VyQ2FzZSIsImxlbl8xOCIsImdldEZ1bGxZZWFyIiwibGVuXzE4X2JpcnRoZGF5IiwieWlfcHVibGljIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxL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S0wsRUFBTU0sV0FBV0wsR0FBUyxFQUFHSyxXQUFXSixJQUNqRSxPQUFHQyxFQUFVVyxlQUFpQlIsV0FBV04sSUFBU0csRUFBVUssWUFBY0YsV0FBV0wsR0FBUyxHQUFLRSxFQUFVTSxXQUFhSCxXQUFXSixHQWN4SGEsS0FLakJyRSxHQUFPLEVBQ1BFLEVBN0RVLGVBK0RSLENBQ0ZzQixJQUFLeEIsRUFDTHVCLElBQUtyQixLQUlickIsRUFBS3lGLFVBQVl6RixFQUFLeUYsV0FBYSxHQUNuQ3pGLEVBQUt5RixVQUFVN0YsV0FBYUEsRUFDckJBIiwiZmlsZSI6ImZvcm1fY2hlY2subWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLyoqXG4gKiB5aXpxIDIwMjAvMDcvMTcuXG4gKlxuICovXG47KGZ1bmN0aW9uIGRlZmluZWxheWVyKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIGxldCBmb3JtX2NoZWNrID0gZmFjdG9yeShnbG9iYWwpO1xuICAgIC8v57uZ57G75rOo5YWl5Yiwd2luZG935LiK77yM5pa55L6/5Lia5Yqh5LqM5qyh6LCD55SoXG4gICAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiAgZXhwb3J0cyAmJiB0eXBlb2YgZXhwb3J0cy5ub2RlTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmb3JtX2NoZWNrOyAgICAgICAgXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy9BTURcbiAgICAgICAgZGVmaW5lKFsnZXhwb3J0cyddLCBmb3JtX2NoZWNrKTsgICAgXG4gICAgfVxuICAgIFxuICAgIGdsb2JhbC5mb3JtX2NoZWNrID0gZm9ybV9jaGVjaztcblxufSkodGhpcywgZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIC8v5aSa5qyh6LCD55So5pe255qE5YWx5pyJ5pa55rOVXG4gICAgbGV0IF93aW4gPSB3aW5kb3csXG4gICAgICAgIF9kb2MgPSBkb2N1bWVudDtcblxuICAgIGxldCBnZXRfZG9tID0gKGRvbSkgPT4ge1xuICAgICAgICBpZih0eXBlb2YgZG9tID09PSAnc3RyaW5nJyl7XG4gICAgICAgICAgICBkb20gPSBfZG9jLnF1ZXJ5U2VsZWN0b3IoZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZihkb20gJiYgZG9tLnRhZ05hbWUpe1xuICAgICAgICAgICAgcmV0dXJuIGRvbTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdmb3JtX2NoZWNrOuivt+ajgOafpeS9oOS8oOWFpeeahOWFg+e0oOaYr+WQpuato+ehruOAgicpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgaW5zZXJ0X2FmdGVyID0gKG5ld19lbCwgdGFyZ2V0KSA9PiB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudC5sYXN0Q2hpbGQgPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobmV3X2VsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobmV3X2VsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGZvcm1fbGlzdCA9IHt9O1xuXG4gICAgbGV0IF9jaGVja19saXN0ID0ge307XG4gICAgbGV0IF9zZXRfY2hlY2sgPSAobmFtZSwgY2hlY2tfZm4pID0+IHtcbiAgICAgICAgaWYoIV9jaGVja19saXN0W25hbWVdKXtcbiAgICAgICAgICAgIF9jaGVja19saXN0W25hbWVdID0gY2hlY2tfZm47XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihuYW1lICsgJ+agoemqjOeahOWQjeWtl+W3sueUqOi/h++8jOivt+mHjeaWsOWPluS4gOS4quWQje+8jOW3suacieeahOWPr+WcqOKAnHlpX3B1YmxpYy5mb3JtX2NoZWNrLl9jaGVja19saXN04oCd5Lit5p+l5YiwJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBmb3JtX2NoZWNrID0ge1xuICAgICAgICAvL+WcqOafkOWFg+e0oOmHjOi+k+WFpeaPkOekuuWGheWuuVxuICAgICAgICBub3RpY2U6IChvYmopID0+IHtcbiAgICAgICAgICAgIG9iai50aXBzLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yX3RpcHMnKTtcbiAgICAgICAgICAgIG9iai50aXBzLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5fdGlwcycpO1xuICAgICAgICAgICAgaWYoIW9iai5yZXYpe1xuICAgICAgICAgICAgICAgIG9iai50aXBzLmlubmVySFRNTCA9IG9iai5tc2cgfHwgJyc7XG4gICAgICAgICAgICAgICAgaWYob2JqLnR5cGUgPT09ICdibHVyJyl7XG4gICAgICAgICAgICAgICAgICAgIG9iai50aXBzLmNsYXNzTGlzdC5hZGQoJ2Vycm9yX3RpcHMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYob2JqLnR5cGUgPT09ICdmb2N1cycpe1xuICAgICAgICAgICAgICAgICAgICBvYmoudGlwcy5jbGFzc0xpc3QuYWRkKCd3YXJuX3RpcHMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBvYmoudGlwcy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy/nu5nmn5DlhYPntKDnu5HlrprmoKHpqozmlrnms5VcbiAgICAgICAgY29udGVudDogKG9iaikgPT4ge1xuICAgICAgICAgICAgb2JqLnRhcmdldCA9IGdldF9kb20ob2JqLnRhcmdldCk7XG4gICAgICAgICAgICBvYmoudGlwcyA9IG9iai50aXBzICYmIGdldF9kb20ob2JqLnRpcHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL+WmguaenOayoeacieS8oOWFpeaPkOekuuWFg+e0oO+8jOWcqOWQjumdouWKoOS4gOS4quaPkOekuuWFg+e0oFxuICAgICAgICAgICAgaWYoIW9iai50aXBzKXtcbiAgICAgICAgICAgICAgICBvYmoudGlwcyA9IF9kb2MuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgIGluc2VydF9hZnRlcihvYmoudGlwcywgb2JqLnRhcmdldCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9iai50aXBzLmNsYXNzTGlzdC5hZGQoJ2lucHV0X3RpcHMnKTtcblxuICAgICAgICAgICAgaWYob2JqLnRhcmdldC5fX2Zvcm1fY2hlY2tfX2NvbnRlbnQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+atpOWFg+e0oOS4jeiDvee7keS4pOasoeagoemqjCcsIG9iai50YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqLnRhcmdldC5fX2Zvcm1fY2hlY2tfX2NvbnRlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgICBsZXQgYmx1cl90aW1lciA9IG51bGw7XG4gICAgICAgICAgICBsZXQgYmx1cl9mbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZihvYmoucmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChibHVyX3RpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHZhbCA9IG9iai50YXJnZXQudmFsdWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jaGVja19saXN0W29iai5jaGVja10oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB2YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVjazogX2NoZWNrX2xpc3RcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9ybV9jaGVjay5ub3RpY2Uoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9iai50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHRpcHM6IG9iai50aXBzLFxuICAgICAgICAgICAgICAgICAgICBtc2c6IHJlc3VsdC5NU0csXG4gICAgICAgICAgICAgICAgICAgIHJldjogcmVzdWx0LlJFVixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2JsdXInLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuUkVWO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBfZm9ybV9uYW1lID0gb2JqLmZvcm1fbmFtZSB8fCAnMCc7XG4gICAgICAgICAgICBmb3JtX2xpc3RbX2Zvcm1fbmFtZV0gPSBmb3JtX2xpc3RbX2Zvcm1fbmFtZV0gfHwgW11cbiAgICAgICAgICAgIGZvcm1fbGlzdFtfZm9ybV9uYW1lXS5wdXNoKHtcbiAgICAgICAgICAgICAgICBfZm46IGJsdXJfZm4sXG4gICAgICAgICAgICAgICAgX29iajogb2JqXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgb2JqLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgYmx1cl9mbiwgZmFsc2UpO1xuXG4gICAgICAgICAgICBvYmoudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKG9iai5yZXN1bHQpe1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGJsdXJfdGltZXIpO1xuICAgICAgICAgICAgICAgICAgICBibHVyX3RpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IG9iai50YXJnZXQudmFsdWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NoZWNrX2xpc3Rbb2JqLmNoZWNrXSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogdmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVjazogX2NoZWNrX2xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50YXJnZXQgPSBvYmoudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRpcHMgPSBvYmoudGlwcztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5yZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSw2MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JtX2NoZWNrLm5vdGljZSh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogb2JqLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgdGlwczogb2JqLnRpcHMsXG4gICAgICAgICAgICAgICAgICAgIG1zZzogb2JqLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICByZXY6IG9iai5lbnRyeSA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZvY3VzJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRhcmdldDogb2JqLnRhcmdldCxcbiAgICAgICAgICAgICAgICB0aXBzOiBvYmoudGlwc1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvL+WPquagoemqjOWFt+S9k+eahOWAvFxuICAgICAgICBjaGVjazogKG9iaikgPT4ge1xuICAgICAgICAgICAgb2JqLnRpcHMgPSBvYmoudGlwcyAmJiBnZXRfZG9tKG9iai50aXBzKTtcblxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IF9jaGVja19saXN0W29iai5jaGVja10oe1xuICAgICAgICAgICAgICAgIHZhbDogb2JqLnZhbCxcbiAgICAgICAgICAgICAgICBjaGVjazogX2NoZWNrX2xpc3RcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZihvYmoudGlwcyl7XG4gICAgICAgICAgICAgICAgZm9ybV9jaGVjay5ub3RpY2Uoe1xuICAgICAgICAgICAgICAgICAgICB0aXBzOiBvYmoudGlwcyxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiByZXN1bHQuTVNHLFxuICAgICAgICAgICAgICAgICAgICByZXY6IHJlc3VsdC5SRVYsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdibHVyJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuUkVWO1xuICAgICAgICB9LFxuICAgICAgICAvL+agoemqjGNvbnRlbnTmlrnms5Xnu5HlrprnmoTlhYPntKDmmK/lkKbpgJrov4fmoKHpqoxcbiAgICAgICAgbXVzdDogKHN0cikgPT4ge1xuICAgICAgICAgICAgbGV0IHJldiA9IHRydWUsXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQsXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRfcmV2ID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICB0YXJnZXRfbGlzdCA9IGZvcm1fbGlzdFsoc3RyIHx8ICcwJyldIHx8IFtdO1xuXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGFyZ2V0X2xpc3QubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGxldCBmID0gdGFyZ2V0X2xpc3RbaV0uX2ZuKCk7XG4gICAgICAgICAgICAgICAgLy/lpoLmnpzphY3kuoblv4XloavpobnlsLHlj6rmn6Xlv4XloavpoblcbiAgICAgICAgICAgICAgICBpZih0YXJnZXRfbGlzdFtpXS5fb2JqLnJlcXVpcmVkKXtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiggIWYgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkX3JldiA9IGY7IC8v6L+Z5pe2IGYgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggIWYgKXtcbiAgICAgICAgICAgICAgICAgICAgcmV2ID0gZjsgLy/ov5nml7YgZiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYocmVxdWlyZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXF1aXJlZF9yZXY7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXRfY2hlY2s6IF9zZXRfY2hlY2ssXG4gICAgICAgIF9jaGVja19saXN0OiBfY2hlY2tfbGlzdFxuICAgIH1cblxuICAgIF9zZXRfY2hlY2soJ2lzX2VtcHR5JywgKG9iaikgPT4ge1xuICAgICAgICBsZXQgbnVtID0gb2JqLnZhbCxcbiAgICAgICAgICAgIG1zZyA9ICcnLFxuICAgICAgICAgICAgcmV2ID0gdHJ1ZTtcbiAgICAgICAgaWYoIG51bSA9PSAnJyB8fCBudW0gPT0gbnVsbCApe1xuICAgICAgICAgICAgcmV2ID0gIGZhbHNlO1xuICAgICAgICAgICAgbXNnID0gJ+S4jeiDveS4uuepuidcbiAgICAgICAgfVxuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICBSRVY6IHJldixcbiAgICAgICAgICAgIE1TRzogbXNnXG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICBfc2V0X2NoZWNrKCdpc19lbWFpbCcsIG9iaiA9PiB7XG4gICAgICAgIGxldCB2YWwgPSBvYmoudmFsLFxuICAgICAgICAgICAgbm90X2VtcHR5ID0gb2JqLmNoZWNrLmlzX2VtcHR5KG9iaiksXG4gICAgICAgICAgICByZXYgPSBub3RfZW1wdHkuUkVWLFxuICAgICAgICAgICAgbXNnID0gbm90X2VtcHR5Lk1TRztcblxuICAgICAgICBpZihyZXYgJiYgISgvXihbYS16QS1aMC05X1xcLlxcLV0pK1xcQCgoW2EtekEtWjAtOVxcLV0pK1xcLikrKFthLXpBLVowLTldezIsNH0pKyQvLnRlc3QodmFsKSkgKXtcbiAgICAgICAgICAgIHJldiA9IGZhbHNlO1xuICAgICAgICAgICAgbXNnID0gJ+ivt+i+k+WFpeato+ehrueahOmCrueusSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgUkVWOiByZXYsXG4gICAgICAgICAgICBNU0c6IG1zZ1xuICAgICAgICB9O1xuICAgIH0pO1xuICAgIF9zZXRfY2hlY2soJ3Bob25lJywgb2JqID0+IHtcbiAgICAgICAgbGV0IG51bSA9IG9iai52YWwucmVwbGFjZSgvKF5cXHMqKXwoXFxzKiQpL2csJycpLFxuICAgICAgICAgICAgbm90X2VtcHR5ID0gb2JqLmNoZWNrLmlzX2VtcHR5KG9iaiksXG4gICAgICAgICAgICByZXYgPSBub3RfZW1wdHkuUkVWLFxuICAgICAgICAgICAgbXNnID0gbm90X2VtcHR5Lk1TRztcbiAgICAgICAgaWYocmV2ICYmICEvXigxKVszfDR8NXw2fDd8OHw5XVxcZHs5fSQvLnRlc3QobnVtKSl7XG4gICAgICAgICAgICByZXYgPSBmYWxzZTtcbiAgICAgICAgICAgIG1zZyA9ICfor7fovpPlhaXmraPnoa7nmoTmiYvmnLrlj7cnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIFJFVjogcmV2LFxuICAgICAgICAgICAgTVNHOiBtc2dcbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG4gICAgLy/pqozor4Hlp5PlkI1cbiAgICBfc2V0X2NoZWNrKCdyZWFsX25hbWUnLCBvYmogPT4ge1xuICAgICAgICBsZXQgdmFsID0gb2JqLnZhbCxcbiAgICAgICAgICAgIG5vdF9lbXB0eSA9IG9iai5jaGVjay5pc19lbXB0eShvYmopLFxuICAgICAgICAgICAgcmV2ID0gbm90X2VtcHR5LlJFVixcbiAgICAgICAgICAgIG1zZyA9IG5vdF9lbXB0eS5NU0c7XG4gICAgICAgIGlmKHJldiAmJiAhL15cXHMqW1xcdTRlMDAtXFx1OWZhNV17MSx9W1xcdTRlMDAtXFx1OWZhNS4/XXswLDE1fVtcXHU0ZTAwLVxcdTlmYTVdezEsfVxccyokLy50ZXN0KHZhbCkgfHwgdmFsLmxlbmd0aCA+IDIwKXtcbiAgICAgICAgICAgIHJldiA9IGZhbHNlO1xuICAgICAgICAgICAgbXNnID0gJ+ivt+i+k+WFpeato+ehruecn+WunuWnk+WQjSc7XG4gICAgICAgIH1lbHNlIGlmKHZhbC5pbmRleE9mKCcgJykgPiAtMSl7XG4gICAgICAgICAgICByZXYgPSBmYWxzZTtcbiAgICAgICAgICAgIG1zZyA9ICfkuI3og73mnInnqbrmoLwnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIFJFVjogcmV2LFxuICAgICAgICAgICAgTVNHOiBtc2dcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8v6aqM6K+B5Zyw5Z2AXG4gICAgX3NldF9jaGVjaygnYWRkcmVzcycsIG9iaiA9PiB7XG4gICAgICAgIGxldCB2YWwgPSBvYmoudmFsLFxuICAgICAgICAgICAgbm90X2VtcHR5ID0gb2JqLmNoZWNrLmlzX2VtcHR5KG9iaiksXG4gICAgICAgICAgICByZXYgPSBub3RfZW1wdHkuUkVWLFxuICAgICAgICAgICAgbXNnID0gbm90X2VtcHR5Lk1TRyxcbiAgICAgICAgICAgIF9tc2dfYXJyO1xuICAgICAgICBpZihyZXYgJiYgL1teXFxhLVxcelxcQS1cXFowLTlcXHU0RTAwLVxcdTlGQTVcXCBdL2cudGVzdCh2YWwpKXtcbiAgICAgICAgICAgIF9tc2dfYXJyID0gdmFsLm1hdGNoKC9bXlxcYS1cXHpcXEEtXFxaMC05XFx1NEUwMC1cXHU5RkE1XFwgXS9nKSB8fCBbXTtcbiAgICAgICAgICAgIHJldiA9IGZhbHNlO1xuICAgICAgICAgICAgbXNnID0gJ+S4jeW+l+WQq+aciSgnICsgX21zZ19hcnIuam9pbignICcpICsgJyknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIFJFVjogcmV2LFxuICAgICAgICAgICAgTVNHOiBtc2dcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8v6aqM6K+B5Zyw5Z2AXG4gICAgX3NldF9jaGVjaygnaWRfY2FyZCcsIG9iaiA9PiB7XG4gICAgICAgIGxldCBudW0gPSBvYmoudmFsLFxuICAgICAgICAgICAgZXJyX21zZyA9ICfor7fovpPlhaXmraPnoa7ouqvku73or4Hlj7fnoIEnLFxuICAgICAgICAgICAgbGVuID0gbnVtLmxlbmd0aCxcbiAgICAgICAgICAgIHdpID0gWyA3LCA5LCAxMCwgNSwgOCwgNCwgMiwgMSwgNiwgMywgNywgOSwgMTAsIDUsIDgsIDQsIDIsIDEgXSxcbiAgICAgICAgICAgIHZhbGlkZV9jb2RlID0gWyAxLCAwLCAxMCwgOSwgOCwgNywgNiwgNSwgNCwgMywgMiBdLFxuICAgICAgICAgICAgdmFsX2NvZGUgPSAwLFxuICAgICAgICAgICAgbm90X2VtcHR5ID0gb2JqLmNoZWNrLmlzX2VtcHR5KG9iaiksXG4gICAgICAgICAgICByZXYgPSBub3RfZW1wdHkuUkVWLFxuICAgICAgICAgICAgbXNnID0gbm90X2VtcHR5Lk1TRyxcbiAgICAgICAgICAgIC8vMTXkvY3ml7bnmoTnlJ/ml6XmoKHlr7lcbiAgICAgICAgICAgIGxlbl8xNV9iaXJ0aGRheSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSAgbnVtLnN1YnN0cmluZyg2LDgpLFxuICAgICAgICAgICAgICAgICAgICBtb250aCA9IG51bS5zdWJzdHJpbmcoOCwxMCksXG4gICAgICAgICAgICAgICAgICAgIGRheSA9IG51bS5zdWJzdHJpbmcoMTAsMTIpLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wX2RhdGUgPSBuZXcgRGF0ZSggeWVhciwgcGFyc2VGbG9hdChtb250aCkgLSAxLCBwYXJzZUZsb2F0KGRheSkgKTtcbiAgICAgICAgICAgICAgICBpZih0ZW1wX2RhdGUuZ2V0WWVhcigpICE9IHBhcnNlRmxvYXQoeWVhcikgfHwgdGVtcF9kYXRlLmdldE1vbnRoKCkgIT0gcGFyc2VGbG9hdChtb250aCktMSB8fCB0ZW1wX2RhdGUuZ2V0RGF0ZSgpICE9IHBhcnNlRmxvYXQoZGF5KSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxlbl8xOCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzdW0gPSAwLFxuICAgICAgICAgICAgICAgICAgICBudW0gPSBvYmoudmFsLnNwbGl0KFwiXCIpO1xuICAgICAgICAgICAgICAgIGlmIChudW1bMTddLnRvTG93ZXJDYXNlKCkgPT0gJ3gnKXtcbiAgICAgICAgICAgICAgICAgICAgbnVtWzE3XSA9IDEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8IDE3OyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBzdW0gKz0gd2lbaV0gKiBudW1baV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhbF9jb2RlID0gc3VtICUgMTE7XG4gICAgICAgICAgICAgICAgaWYgKG51bVsxN10gIT0gdmFsaWRlX2NvZGVbdmFsX2NvZGVdKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVuXzE4X2JpcnRoZGF5ID0gZnVuY3Rpb24gKCl7Ly9pc1ZhbGlkaXR5QnJpdGhCeTE4SWRDYXJkXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSAgbnVtLnN1YnN0cmluZyg2LDEwKSxcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBudW0uc3Vic3RyaW5nKDEwLDEyKSxcbiAgICAgICAgICAgICAgICAgICAgZGF5ID0gbnVtLnN1YnN0cmluZygxMiwxNCksXG4gICAgICAgICAgICAgICAgICAgIHRlbXBfZGF0ZSA9IG5ldyBEYXRlKHllYXIsIHBhcnNlRmxvYXQobW9udGgpIC0gMSwgcGFyc2VGbG9hdChkYXkpKTtcbiAgICAgICAgICAgICAgICBpZih0ZW1wX2RhdGUuZ2V0RnVsbFllYXIoKSAhPSBwYXJzZUZsb2F0KHllYXIpIHx8IHRlbXBfZGF0ZS5nZXRNb250aCgpICE9IHBhcnNlRmxvYXQobW9udGgpIC0gMSB8fCB0ZW1wX2RhdGUuZ2V0RGF0ZSgpICE9IHBhcnNlRmxvYXQoZGF5KSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgaWYoIXJldil7XG4gICAgICAgICAgICAvL21zZyA9IFwi6K+36L6T5YWl6Lqr5Lu96K+B5Y+3XCI7XG4gICAgICAgIH1lbHNlIGlmKHJldiAmJiBsZW4gPT0gMTUpe1xuICAgICAgICAgICAgaWYoIWxlbl8xNV9iaXJ0aGRheSgpKXtcbiAgICAgICAgICAgICAgICByZXYgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBtc2cgPSBlcnJfbXNnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZSBpZihyZXYgJiYgbGVuID09IDE4KXtcbiAgICAgICAgICAgIGlmKCEobGVuXzE4KCkgJiYgbGVuXzE4X2JpcnRoZGF5KCkpKXtcbiAgICAgICAgICAgICAgICByZXYgPSAgZmFsc2U7XG4gICAgICAgICAgICAgICAgbXNnID0gZXJyX21zZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXYgPSAgZmFsc2U7XG4gICAgICAgICAgICBtc2cgPSBlcnJfbXNnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIFJFVjogcmV2LFxuICAgICAgICAgICAgTVNHOiBtc2dcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgX3dpbi55aV9wdWJsaWMgPSBfd2luLnlpX3B1YmxpYyB8fCB7fTtcbiAgICBfd2luLnlpX3B1YmxpYy5mb3JtX2NoZWNrID0gZm9ybV9jaGVjaztcbiAgICByZXR1cm4gZm9ybV9jaGVjaztcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=